<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Oracle_Example_Contacts_java</title>
</head>
<body>
<h1>Oracle Java Example Contacts.java Code</h1>
<pre>package jportal.oracledemo;<br>import bbd.jportal.*;<br>import java.sql.*;<br>/**<br>* This table demonstrates the usage of Sequence,<br>* Timestamp and Userstamp<br>* This code was generated, do not modify it, modify it at source and regenerate it.<br>*/<br>public class Contacts<br>{<br>  Connector connector;<br>  Connection connection;<br>  /**<br>  * Unique sequence number (gaps allowed)<br>  */<br>  public int id;<br>  /**<br>  * Name of the contacts<br>  */<br>  public String name;<br>  /**<br>  * Date and Time when inserted or updated<br>  */<br>  public Timestamp whenDone;<br>  /**<br>  * Logged on user responsible for the insert or update<br>  */<br>  public String whoDoneIt;<br>  /**<br>  * @param Connector for specific database<br>  */<br>  public Contacts(Connector connector)<br>  {<br>    this.connector = connector;<br>    connection = connector.connection;<br>    id = 0;<br>    name = "";<br>    whenDone = new Timestamp(0);<br>    whoDoneIt = "";<br>  }<br>  /**<br>  * Returns no output.<br>  * @exception SQLException is passed through<br>  */<br>  public void insert() throws SQLException<br>  {<br>    String statement = <br>      "insert into Contacts"<br>    + "( id"<br>    + ", name"<br>    + ", whenDone"<br>    + ", whoDoneIt"<br>    + ") "<br>    + "values"<br>    + " (?"<br>    + ", ?"<br>    + ", ?"<br>    + ", ?"<br>    + ")"<br>    ;<br>    PreparedStatement prep = connection.prepareStatement(statement);<br>    id = connector.getSequence("Contacts");<br>    whenDone = connector.getTimestamp();<br>    whoDoneIt = connector.getUserstamp();<br>    prep.setInt(1, id);<br>    prep.setString(2, name);<br>    prep.setTimestamp(3, whenDone);<br>    prep.setString(4, whoDoneIt);<br>    prep.executeUpdate();<br>    prep.close();<br>  }<br>  /**<br>  * Returns no records.<br>  * @param name input.<br>  * @exception SQLException is passed through<br>  */<br>  public void insert(<br>    String name<br>  ) throws SQLException<br>  {<br>    this.name = name;<br>    insert();<br>  }<br>  /**<br>  * Returns no output.<br>  * @exception SQLException is passed through<br>  */<br>  public void update() throws SQLException<br>  {<br>    String statement = <br>      "update Contacts"<br>    + " set"<br>    + "  name = ?"<br>    + ", whenDone = ?"<br>    + ", whoDoneIt = ?"<br>    + " where id = ?"<br>    ;<br>    PreparedStatement prep = connection.prepareStatement(statement);<br>    whenDone = connector.getTimestamp();<br>    whoDoneIt = connector.getUserstamp();<br>    prep.setString(1, name);<br>    prep.setTimestamp(2, whenDone);<br>    prep.setString(3, whoDoneIt);<br>    prep.setInt(4, id);<br>    prep.executeUpdate();<br>    prep.close();<br>  }<br>  /**<br>  * Returns no records.<br>  * @param id key input.<br>  * @param name input.<br>  * @exception SQLException is passed through<br>  */<br>  public void update(<br>    int id<br>  , String name<br>  ) throws SQLException<br>  {<br>    this.name = name;<br>    this.id = id;<br>    update();<br>  }<br>  /**<br>  * Returns at most one record.<br>  * @return true if a record is found<br>  * @exception SQLException is passed through<br>  */<br>  public boolean selectOne() throws SQLException<br>  {<br>    String statement = <br>      "select"<br>    + "  name"<br>    + ", whenDone"<br>    + ", whoDoneIt"<br>    + " from Contacts"<br>    + " where id = ?"<br>    ;<br>    PreparedStatement prep = connection.prepareStatement(statement);<br>    prep.setInt(1, id);<br>    ResultSet result = prep.executeQuery();<br>    if (!result.next())<br>    {<br>      result.close();<br>      prep.close();<br>      return false;<br>    }<br>    name =  result.getString(1);<br>    whenDone =  result.getTimestamp(2);<br>    whoDoneIt =  result.getString(3);<br>    result.close();<br>    prep.close();<br>    return true;<br>  }<br>  /**<br>  * Returns at most one record.<br>  * @return true if a record is returned.<br>  * @param id key input.<br>  * @exception SQLException is passed through<br>  */<br>  public boolean selectOne(<br>    int id<br>  ) throws SQLException<br>  {<br>    this.id = id;<br>    return selectOne();<br>  }<br>  /**<br>  * Returns any number of records.<br>  * @return result set of records found<br>  * @exception SQLException is passed through<br>  */<br>  public Query selectAllSorted() throws SQLException<br>  {<br>    String statement = <br>      "select"<br>    + "  id"<br>    + ", name"<br>    + ", whenDone"<br>    + ", whoDoneIt"<br>    + " from Contacts"<br>    + " order by id"<br>    ;<br>    PreparedStatement prep = connection.prepareStatement(statement);<br>    ResultSet result = prep.executeQuery();<br>    Query query = new Query(prep, result);<br>    return query;<br>  }<br>  /**<br>  * Returns the next record in a result set.<br>  * @param result The result set for the query.<br>  * @return true while records are found.<br>  * @exception SQLException is passed through<br>  */<br>  public boolean selectAllSorted(Query query) throws SQLException<br>  {<br>    if (!query.result.next())<br>    {<br>      query.close();<br>      return false;<br>    }<br>    ResultSet result = query.result;<br>    id =  result.getInt(1);<br>    name =  result.getString(2);<br>    whenDone =  result.getTimestamp(3);<br>    whoDoneIt =  result.getString(4);<br>    return true;<br>  }<br>  /**<br>  * class method as it has no input or output.<br>  * @exception SQLException is passed through<br>  */<br>  public static void deleteAll(Connector connector) throws SQLException<br>  {<br>    String statement = <br>      "delete from Contacts"<br>    ;<br>    PreparedStatement prep = connector.connection.prepareStatement(statement);<br>    prep.executeUpdate();<br>    prep.close();<br>  }<br>  /**<br>  */<br>  public class DeleteOne<br>  {<br>    /**<br>    * Unique sequence number (gaps allowed)<br>    * (input)<br>    */<br>    public int id;<br>    public DeleteOne()<br>    {<br>      id = 0;<br>    }<br>    /**<br>    * Returns no output.<br>    * @exception SQLException is passed through<br>    */<br>    public void run() throws SQLException<br>    {<br>      String statement = <br>      "delete from Contacts"<br>    + " where id = ?"<br>      ;<br>      PreparedStatement prep = connection.prepareStatement(statement);<br>      prep.setInt(1, id);<br>      prep.executeUpdate();<br>      prep.close();<br>    }<br>    /**<br>    * Returns no records.<br>    * @param id key input.<br>    * @exception SQLException is passed through<br>    */<br>    public void run(<br>      int id<br>    ) throws SQLException<br>    {<br>      this.id = id;<br>      run();<br>    }<br>  }<br>  public DeleteOne deleteOne()<br>  {<br>    return new DeleteOne();<br>  }<br>  /**<br>  */<br>  public class Count<br>  {<br>    /**<br>    * (output)<br>    */<br>    public int noOf;<br>    public Count()<br>    {<br>      noOf = 0;<br>    }<br>    /**<br>    * Returns at most one record.<br>    * @return true if a record is found<br>    * @exception SQLException is passed through<br>    */<br>    public boolean run() throws SQLException<br>    {<br>      String statement = <br>      "select count(*) noOf from Contacts"<br>      ;<br>      PreparedStatement prep = connection.prepareStatement(statement);<br>      ResultSet result = prep.executeQuery();<br>      if (!result.next())<br>      {<br>        result.close();<br>        prep.close();<br>        return false;<br>      }<br>      noOf =  result.getInt(1);<br>      result.close();<br>      prep.close();<br>      return true;<br>    }<br>  }<br>  public Count count()<br>  {<br>    return new Count();<br>  }<br>  /**<br>  */<br>  public class Exists<br>  {<br>    /**<br>    * Unique sequence number (gaps allowed)<br>    * (input)<br>    */<br>    public int id;<br>    /**<br>    * (output)<br>    */<br>    public int noOf;<br>    public Exists()<br>    {<br>      id = 0;<br>      noOf = 0;<br>    }<br>    /**<br>    * Returns at most one record.<br>    * @return true if a record is found<br>    * @exception SQLException is passed through<br>    */<br>    public boolean run() throws SQLException<br>    {<br>      String statement = <br>      "select count(*) noOf from Contacts"<br>    + " where id = ?"<br>      ;<br>      PreparedStatement prep = connection.prepareStatement(statement);<br>      prep.setInt(1, id);<br>      ResultSet result = prep.executeQuery();<br>      if (!result.next())<br>      {<br>        result.close();<br>        prep.close();<br>        return false;<br>      }<br>      noOf =  result.getInt(1);<br>      result.close();<br>      prep.close();<br>      return true;<br>    }<br>    /**<br>    * Returns at most one record.<br>    * @return true if a record is returned.<br>    * @param id key input.<br>    * @exception SQLException is passed through<br>    */<br>    public boolean run(<br>      int id<br>    ) throws SQLException<br>    {<br>      this.id = id;<br>      return run();<br>    }<br>  }<br>  public Exists exists()<br>  {<br>    return new Exists();<br>  }<br>  /**<br>  * This procedure demonstrates a single record output<br>  */<br>  public class FindName<br>  {<br>    /**<br>    * name to base the lookup on<br>    * (input)<br>    */<br>    public String name;<br>    /**<br>    * id no of record looked up<br>    * (output)<br>    */<br>    public int id;<br>    public FindName()<br>    {<br>      name = "";<br>      id = 0;<br>    }<br>    /**<br>    * This procedure demonstrates a single record output<br>    * Returns at most one record.<br>    * @return true if a record is found<br>    * @exception SQLException is passed through<br>    */<br>    public boolean run() throws SQLException<br>    {<br>      String statement = <br>      "SELECT id FROM Contacts WHERE name = ? "<br>      ;<br>      PreparedStatement prep = connection.prepareStatement(statement);<br>      prep.setString(1, name);<br>      ResultSet result = prep.executeQuery();<br>      if (!result.next())<br>      {<br>        result.close();<br>        prep.close();<br>        return false;<br>      }<br>      id =  result.getInt(1);<br>      result.close();<br>      prep.close();<br>      return true;<br>    }<br>    /**<br>    * Returns at most one record.<br>    * @return true if a record is returned.<br>    * @param name input.<br>    * @exception SQLException is passed through<br>    */<br>    public boolean run(<br>      String name<br>    ) throws SQLException<br>    {<br>      this.name = name;<br>      return run();<br>    }<br>  }<br>  public FindName findName()<br>  {<br>    return new FindName();<br>  }<br>  /**<br>  * This procedure demonstrates an update with no output<br>  */<br>  public class ChangeName<br>  {<br>    /**<br>    * New name for record<br>    * (input)<br>    */<br>    public String newName;<br>    /**<br>    * Timestamp when done<br>    * (input)<br>    */<br>    public Timestamp whenDone;<br>    /**<br>    * Userstamp of who dunnit<br>    * (input)<br>    */<br>    public String whoDoneIt;<br>    /**<br>    * Old name to change from<br>    * (input)<br>    */<br>    public String oldName;<br>    public ChangeName()<br>    {<br>      newName = "";<br>      whenDone = new Timestamp(0);<br>      whoDoneIt = "";<br>      oldName = "";<br>    }<br>    /**<br>    * This procedure demonstrates an update with no output<br>    * Returns no output.<br>    * @exception SQLException is passed through<br>    */<br>    public void run() throws SQLException<br>    {<br>      String statement = <br>      "UPDATE Contacts "<br>    + "SET name = ? "<br>    + ", whenDone = ? "<br>    + ", whoDoneIt = ? "<br>    + "WHERE name = ? "<br>      ;<br>      PreparedStatement prep = connection.prepareStatement(statement);<br>      whenDone = connector.getTimestamp();<br>      whoDoneIt = connector.getUserstamp();<br>      prep.setString(1, newName);<br>      prep.setTimestamp(2, whenDone);<br>      prep.setString(3, whoDoneIt);<br>      prep.setString(4, oldName);<br>      prep.executeUpdate();<br>      prep.close();<br>    }<br>    /**<br>    * Returns no records.<br>    * @param newName input.<br>    * @param oldName input.<br>    * @exception SQLException is passed through<br>    */<br>    public void run(<br>      String newName<br>    , String oldName<br>    ) throws SQLException<br>    {<br>      this.newName = newName;<br>      this.oldName = oldName;<br>      run();<br>    }<br>  }<br>  public ChangeName changeName()<br>  {<br>    return new ChangeName();<br>  }<br>  /**<br>  * This procedure is similar to changeName but demostrates dynamic parameters<br>  */<br>  public class ChangeName2<br>  {<br>    /**<br>    * Timestamp when done<br>    * (input)<br>    */<br>    public Timestamp whenDone;<br>    /**<br>    * Userstamp of who dunnit<br>    * (input)<br>    */<br>    public String whoDoneIt;<br>    /**<br>    * (dynamic)<br>    */<br>    public String newName;<br>    /**<br>    * (dynamic)<br>    */<br>    public String oldName;<br>    public ChangeName2()<br>    {<br>      whenDone = new Timestamp(0);<br>      whoDoneIt = "";<br>      newName = "";<br>      oldName = "";<br>    }<br>    /**<br>    * This procedure is similar to changeName but demostrates dynamic parameters<br>    * Returns no output.<br>    * @exception SQLException is passed through<br>    */<br>    public void run() throws SQLException<br>    {<br>      String statement = <br>      "// Note that they must be passed as strings. eg. 'HARRY' "<br>    + "UPDATE Contacts "<br>    + "SET name =  "<br>    +newName<br>    + " "<br>    + ", whenDone = ? "<br>    + ", whoDoneIt = ? "<br>    + "WHERE name =  "<br>    +oldName<br>    + " "<br>      ;<br>      PreparedStatement prep = connection.prepareStatement(statement);<br>      whenDone = connector.getTimestamp();<br>      whoDoneIt = connector.getUserstamp();<br>      prep.setTimestamp(1, whenDone);<br>      prep.setString(2, whoDoneIt);<br>      prep.executeUpdate();<br>      prep.close();<br>    }<br>    /**<br>    * Returns no records.<br>    * @param changeName2 dynamic input.<br>    * @param changeName2 dynamic input.<br>    * @exception SQLException is passed through<br>    */<br>    public void run(<br>      String newName<br>    , String oldName<br>    ) throws SQLException<br>    {<br>      this.newName = newName;<br>      this.oldName = oldName;<br>      run();<br>    }<br>  }<br>  public ChangeName2 changeName2()<br>  {<br>    return new ChangeName2();<br>  }<br>  /**<br>  * This procedure is similar to changeName but demostrates dynamic parameters<br>  */<br>  public class ChangeName3<br>  {<br>    /**<br>    * Timestamp when done<br>    * (input)<br>    */<br>    public Timestamp whenDone;<br>    /**<br>    * Userstamp of who dunnit<br>    * (input)<br>    */<br>    public String whoDoneIt;<br>    /**<br>    * (dynamic)<br>    */<br>    public String newName;<br>    /**<br>    * (dynamic)<br>    */<br>    public String Where;<br>    public ChangeName3()<br>    {<br>      whenDone = new Timestamp(0);<br>      whoDoneIt = "";<br>      newName = "";<br>      Where = "";<br>    }<br>    /**<br>    * This procedure is similar to changeName but demostrates dynamic parameters<br>    * Returns no output.<br>    * @exception SQLException is passed through<br>    */<br>    public void run() throws SQLException<br>    {<br>      String statement = <br>      "UPDATE Contacts "<br>    + "SET name =  "<br>    +newName<br>    + ", "<br>    + "whenDone = ?, "<br>    + "whoDoneIt = ? "<br>    + "WHERE  "<br>    +Where<br>    + " "<br>      ;<br>      PreparedStatement prep = connection.prepareStatement(statement);<br>      whenDone = connector.getTimestamp();<br>      whoDoneIt = connector.getUserstamp();<br>      prep.setTimestamp(1, whenDone);<br>      prep.setString(2, whoDoneIt);<br>      prep.executeUpdate();<br>      prep.close();<br>    }<br>    /**<br>    * Returns no records.<br>    * @param changeName3 dynamic input.<br>    * @param changeName3 dynamic input.<br>    * @exception SQLException is passed through<br>    */<br>    public void run(<br>      String newName<br>    , String Where<br>    ) throws SQLException<br>    {<br>      this.newName = newName;<br>      this.Where = Where;<br>      run();<br>    }<br>  }<br>  public ChangeName3 changeName3()<br>  {<br>    return new ChangeName3();<br>  }<br>}<br></pre>
</body>
</html>
