<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>An example si</title>
</head>
<body>
<h1>Oracle Java Example SI File</h1>
<pre>DATABASE oracleDemo         // This name is used to generate the .sql file<br>PACKAGE  jportal.oracledemo // This value is inserted into each .java file<br>SERVER   orcl               // The next three values will build up the Oracle<br>USERID   scott              // connect string value<br>PASSWORD tiger<br>                            // The ** comments are special and can only be used<br>                            // behind TABLE xxx, special PROC xxx and field<br>                            // defs. These supply extra comments for the<br>                            // .java classes generated.<br><br>TABLE Contacts              ** This table demonstrates the usage of Sequence,<br>                            ** Timestamp and Userstamp<br>  id        Sequence        ** Unique sequence number (gaps allowed)<br>  name      Char 50         ** Name of the contacts<br>  whenDone  Timestamp       ** Date and Time when inserted or updated<br>  whoDoneIt Userstamp       ** Logged on user responsible for the insert or update<br><br>KEY ContactsKey1 PRIMARY    // Primary key for table<br>  id<br><br>KEY ContactsKey2 UNIQUE     // Unique key<br>  name<br><br>PROC insert                 // Standard insert<br>PROC update                 // Standard update<br>PROC selectOne              // Standard selectOne ([for Update] can be added)<br>PROC selectAll in order     // Standard selectAll ([in Order]<br>                            // [for Update] can be added)<br>PROC deleteOne              // Standard deleteOne<br>PROC deleteAll              // Standard deleteAll<br>PROC count                  // Standard count<br>PROC exists                 // Standard exists<br><br>PROC findName               ** This procedure demonstrates a single record output<br>INPUT                       // There is a one for one relationship of Input to ?<br>                            // (use a :placeholder rather)<br>  name      Char 50         ** name to base the lookup on<br>OUTPUT (single)             // (single) indicates zero or one output only<br>  id        int             ** id no of record looked up<br>SQLCODE                     <br>SELECT id FROM Contacts WHERE name = :name<br>ENDCODE<br><br>PROC changeName             ** This procedure demonstrates an update with no output<br>INPUT                       // Note that the inputs match the ? marks in the query<br>  newName   Char 50         ** New name for record<br>  whenDone  Timestamp       ** Timestamp when done<br>  whoDoneIt Userstamp       ** Userstamp of who dunnit<br>  oldName   Char 50         ** Old name to change from<br>SQLCODE                        <br>UPDATE Contacts<br> SET name = :newName<br>, whenDone = :whenDone<br>, whoDoneIt = :whoDoneIt<br> WHERE name = :oldName<br>ENDCODE<br><br>PROC changeName2            ** This procedure is similar to changeName but demostrates dynamic parameters<br>INPUT                       // Note that oldName and newName are not in the INPUT<br>  whenDone  Timestamp       ** Timestamp when done<br>  whoDoneIt Userstamp       ** Userstamp of who dunnit<br>SQLCODE                     // newName and oldName will be added to the INPUTS but<br>                            // Note that they must be passed as strings. eg. 'HARRY'<br>UPDATE Contacts <br>SET name = &amp;newName<br>, whenDone = :whenDone<br>, whoDoneIt = :whoDoneIt <br>WHERE name = &amp;oldName<br>ENDCODE<br><br>PROC changeName3            ** This procedure is similar to changeName but demostrates dynamic parameters<br>INPUT                       // Note that oldName and newName are not in the INPUT<br>  whenDone  Timestamp       ** Timestamp when done<br>  whoDoneIt Userstamp       ** Userstamp of who dunnit<br>SQLCODE                     // newName is sized 100 and the Where must be supplied<br>  UPDATE Contacts<br>  SET name = &amp;newName(100),<br>      whenDone = :whenDone,<br>      whoDoneIt = :whoDoneIt<br>  WHERE &amp;Where(2048)<br>ENDCODE<br><br>SQLDATA<br>insert into Contacts values(ContactsSeq.NextVal, 'Contact 1', sysdate, user)<br>insert into Contacts values(ContactsSeq.NextVal, 'Contact 2', sysdate, user)<br>insert into Contacts values(ContactsSeq.NextVal, 'Contact 3', sysdate, user)<br>commit<br>select * from Contacts<br>ENDDATA<br><br>TABLE Master                ** This table demonstrates the usage of Sequence, Timestamp and Userstamp<br>                            ** it also demostrates a link or foreign key to Contacts based on contact<br>  id        Sequence        ** Unique sequence number (gaps allowed)<br>  name      Char 50         ** Name of the master<br>  addr1     Char 50         ** address lines (say street)<br>  addr2     Char 50         ** address lines (say suburb)<br>  addr3     Char 50         ** address lines (say town)<br>  phone     Char 20         ** phone numbers<br>  contact   int             ** foreign link to Contacts<br>  whenDone  Timestamp       ** Timestamp when done<br>  whoDoneIt Userstamp       ** Userstamp of who dunnit<br><br>KEY MasterKey PRIMARY       // Primary key needed for standard PROCS<br>  id<br><br>LINK Contacts contact       // Link or foreign key back to Contacts (id)<br><br>VIEW View1<br>OUTPUT<br>  id<br>  name<br>  addr1<br>  addr2<br>  addr3<br>  phone<br>  contact<br>SQLCODE<br>  select master.id<br>  , master.name<br>  , master.addr1<br>  , master.addr2<br>  , master.addr3<br>  , master.phone<br>  , contacts.name<br>   from master<br>  , contacts<br>  where master.contact = contacts.id<br>ENDCODE<br><br>PROC insert                 // Standard insert<br>PROC update                 // Standard update<br>PROC selectOne              // Standard selectOne ([for Update] can be added)<br>PROC selectAll              // Standard selectAll ([in Order] [for Update] can be added)<br>PROC deleteOne              // Standard deleteOne<br>PROC deleteAll              // Standard deleteAll<br>PROC count                  // Standard count<br>PROC exists                 // Standard exists<br><br>SQLDATA<br>insert into Master values(MasterSeq.NextVal, 'Porkie Pygg', 'Grass Hut', '1. Pyggs Lane', 'Easy Pyggings', 'oink Oink', 1, sysdate, user)<br>insert into Master values(MasterSeq.NextVal, 'Morkie Pygg', 'Styx Hut', '2. Pyggs Lane', 'Easy Pyggings', 'oink Oink Eeeh', 2, sysdate, user)<br>insert into Master values(MasterSeq.NextVal, 'Torkie Pygg', 'BryxTon Hut', '3. Pyggs Lane', 'Easy Pyggings', 'oink Oink Bing Bang', 3, sysdate, user)<br>commit<br>select * from Master<br>ENDDATA<br></pre>
</body>
</html>
